/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var geometry = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.MultiPoint();
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// Copyright Â© 2023 Ka Hei Chow

var style = require('users/pinkychow1010/WB_IntraUrban:main_style');
var txt = require('users/pinkychow1010/WB_IntraUrban:main_text');

// Map Session:
// get base map for display
var basemap = require('users/pinkychow1010/WB_IntraUrban:basemap_resources');

// config
basemap.addCustomBasemap('MutedMonotone');
Map.setCenter(70, 30, 4.5);

// turn off drawing tool bar
Map.setControlVisibility({
  drawingToolsControl:false
});

// Switch for changing apps
function changeApp(layerKey) {
  ui.root.clear();
  ui.root.add(ui.Map());
  basemap.addCustomBasemap('MutedMonotone');
}

// Initial description (empty)
var desciption_label = ui.Label({
    value: "",
    style: style.description
  });

// Change decription based on the app user selects
function changeDescription(value) {
  desciption_label.setValue(value);
  return(value);
}

// // Labels to be displayed for each app
// var urban_heat = "This app analyses the Landsat-derived Land Surface Temperature during the last summer.";
// var land_use_cover_ratio = "This app analyses the proportion of different land use cover within the admin boundary.";
// var recent_urbanization = "This app analyses regions that have been intensely urbanized in the 21th century.";
// var population_density = "This app analyses the spatial distribution of urban population density.";
// var veg_cover_changes = "This app analyses the changes of vegetation cover over the last decade.";
// var heat_by_lulc = "This app explores the temperature different between land uses.";

// Drop-down menu for app selection
var selection = ui.Select({
  placeholder: 'Select analysis to begin with...',
  
  items: [
    {value: txt.land_use_cover_ratio, label: 'Land use cover ratio'}, 
    {value: txt.urban_heat, label: 'Urban Heat Analysis'},
    {value: txt.recent_urbanization, label: 'Recent Urbanization'},
    {value: txt.population_density, label: 'Population Density'},
    {value: txt.veg_cover_changes, label: 'Vegetation Cover Changes'},
    {value: txt.heat_by_lulc, label: 'Urban Heat by Land Use'}
  ],
  
  style: style.selection,
  onChange: changeDescription
});

// Config side bar
function createPanel(selection, description_label) {
  
  // app main title
  var title = ui.Label({
    value: 'World Bank Intra-urban Analysis Explorer ðŸŒŽ',
    style: style.title
  });
  
  // headings
  var description = ui.Label({
    value: txt.headings,
    style: style.headings
  });
  
  // set consistent background color for all elements
  selection.style().set('backgroundColor', style.bg_color);
  title.style().set('backgroundColor', style.bg_color);
  description.style().set('backgroundColor', style.bg_color);
  description_label.style().set('backgroundColor', style.bg_color);
  
  // jump to analysis interface
  var start_button = ui.Button({
    label: "Let's go!",
    style: style.start_button,
    onClick: function() {
      
    }
  });
  
  // panel for app selection and switch interface
  var app = ui.Panel({
    layout: ui.Panel.Layout.flow('horizontal'),
    style: style.app_panel
  });
  
  app.add(selection);
  app.add(start_button);
  app.style().set('backgroundColor', style.bg_color);
  
  // set layouts
  var content = ui.Panel([
    title, description, app, description_label
    ], null, {stretch:'vertical'});
  
  content.style().set('backgroundColor', style.bg_color);
  
  var page = ui.Panel([
    content
  ]);
  
  page.style().set('backgroundColor', style.bg_color);
  return page;
}

// call the main page
var main_page = createPanel(selection, desciption_label);

//ui.root.clear()
ui.root.add(main_page);



