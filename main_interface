/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var geometry = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.MultiPoint();
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// Map Session:
// get base map for display
var basemap = require('users/pinkychow1010/WB_IntraUrban:basemap_resources');

// config
basemap.addCustomBasemap('MutedMonotone');
Map.setCenter(70, 30, 4.5);

Map.setControlVisibility({
  drawingToolsControl:false
});

// Switch for changing apps
function changeApp(layerKey) {
  ui.root.clear();
  ui.root.add(ui.Map());
  basemap.addCustomBasemap('MutedMonotone');
  //Map.setOptions('HYBRID');
}

// Initial description (empty)
var desciption_label = ui.Label({
    value: "",
    style: {color: '#FFFFFF', fontWeight: 'normal', fontSize: '12px', padding: '1px 25px 25px 25px', fontFamily: 'monospace'}
  });

// Change decription based on the app user selects
function changeDescription(value) {
  desciption_label.setValue(value);
  return(value);
}

// Labels to be displayed for each app
var urban_heat = "This app analyses the Landsat-derived Land Surface Temperature during the last summer.";
var land_use_cover_ratio = "This app analyses the proportion of different land use cover within the admin boundary.";
var recent_urbanization = "This app analyses regions that have been intensely urbanized in the 21th century.";
var population_density = "This app analyses the spatial distribution of urban population density.";
var veg_cover_changes = "";
var heat_by_lulc = "";

// Drop-down menu for app selection
var selection = ui.Select({
  placeholder: 'Select analysis to begin with...',
  items: [
    {value: land_use_cover_ratio, label: 'Land use cover ratio'}, 
    {value: urban_heat, label: 'Urban Heat Analysis'},
    {value: recent_urbanization, label: 'Recent Urbanization'},
    {value: population_density, label: 'Population Density'},
    {value: veg_cover_changes, label: 'Vegetation Cover Changes'},
    {value: heat_by_lulc, label: 'Urban Heat by Land Use'}
  ],
  style: {padding: '1px 25px 25px 25px'},
  onChange: changeDescription
});

// Config side bar
function createPanel(selection, description_label) {
  
  // app main title
  var title = ui.Label({
    value: 'World Bank Intra-urban Analysis Explorer ðŸŒŽ',
    style: {color: '#FFFFFF', fontWeight: 'bold', fontSize: '22px', whiteSpace: 'pre', textAlign: 'left', padding: '25px 1px 25px 25px'}
  });
  
  // headings
  var description = ui.Label({
    value: 'Welcome to the explorer!ðŸ”Ž \n\nSatellite data is a powerful mean to collect data timely, \nderiving information useful for urban planning and disaster management.\nThis tool allow you to perform multiple EO-based analysis in the urban regions in the globe,\nincluding urban heat and land use cover change analysis. ',
    style: {color: '#FFFFFF', fontWeight: 'normal', fontSize: '15px', whiteSpace: 'pre', textAlign: 'left', padding: '1px 25px 25px 25px'}
  });
  
  // set consistent background color for all elements
  selection.style().set('backgroundColor', '#002244');
  title.style().set('backgroundColor', '#002244');
  description.style().set('backgroundColor', '#002244');
  description_label.style().set('backgroundColor', '#002244');
  
  // jump to analysis interface
  var start_button = ui.Button({
    label: "Let's go!",
    style: {width: '80px'},
    onClick: function() {
      
    }
  });
  
  // panel for app selection and switch interface
  var app = ui.Panel({
    layout: ui.Panel.Layout.flow('horizontal'),
    style: {width: '500px'}
  });
  
  app.add(selection);
  app.add(start_button);
  app.style().set('backgroundColor', '#002244');
  
  // set layouts
  var content = ui.Panel([title, description, app, description_label], null, {stretch:'vertical'});
  
  content.style().set('backgroundColor', '#002244');
  var page = ui.Panel([
    content
  ])
  
  page.style().set('backgroundColor', '#002244');
  return page
}

// call the main page
var main_page = createPanel(selection, desciption_label);

//ui.root.clear()
ui.root.add(main_page)



